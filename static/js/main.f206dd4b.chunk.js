(this["webpackJsonpfrontend-assignment"]=this["webpackJsonpfrontend-assignment"]||[]).push([[0],{46:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),r=n(21),o=n.n(r),s=n(10),i=n(8),u=n.n(i),l=n(3),d=n(11),p=n(4),j=n(5),h=n(7),b=n(6),f=n(0),O=function(t){var e=t.color||"primary",n=t.size||"inline";return Object(f.jsx)("button",{onClick:t.onClick,className:"btn btn--".concat(e," btn--").concat(n),children:t.children})},v=function(t){Object(h.a)(n,t);var e=Object(b.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(f.jsx)("header",{className:"header",children:Object(f.jsx)("h1",{children:"Redeye"})})}}]),n}(a.Component),m=function(t){var e=t.type||"normal";return Object(f.jsx)("div",{className:"heading--".concat(e),children:t.children})},g=function(t){Object(h.a)(n,t);var e=Object(b.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var t=this.props,e=t.title,n=t.content,a=t.onFavourite,c=t.isFavourite;return Object(f.jsxs)("div",{className:"post",children:[Object(f.jsxs)("label",{className:"favourite",children:[Object(f.jsx)("input",{type:"checkbox",checked:c,onChange:a}),"Favourite"]}),Object(f.jsx)("div",{className:"title",children:e}),Object(f.jsx)("div",{className:"content",children:n})]})}}]),n}(a.Component),x=function(t){Object(h.a)(n,t);var e=Object(b.a)(n);function n(){return Object(p.a)(this,n),e.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var t=this.props,e=t.type,n=t.name,a=t.placeholder,c=t.onChange;return Object(f.jsx)("div",{className:"input-wrapper",children:Object(f.jsx)("input",{className:"text-input",type:e,name:n,onChange:c,placeholder:a})})}}]),n}(a.Component),k=n(9),S=n.n(k),y=(n(46),function(t){Object(h.a)(n,t);var e=Object(b.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).onViewClick=Object(d.a)(u.a.mark((function e(){var n,a,c,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.subreddit,e.prev=1,e.next=4,S.a.get("https://oauth.reddit.com/r/".concat(n,"/hot/.json?count=10"));case 4:for(a=e.sent,c=a.data,r=[],o=0;o<10;o++)r.push(c.data.children[o]);t.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{posts:r})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),t.onViewFavouritesClick=Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(localStorage.getItem("favourites")),t.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{posts:[]})})),e.next=4,n.map(function(){var e=Object(d.a)(u.a.mark((function e(n){var a,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("https://oauth.reddit.com/r/".concat(n.sub,"/comments/").concat(n.post,".json"));case 2:a=e.sent,c=a.data,(r=t.state.posts).push(c[0].data.children[0]),t.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{posts:r})}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),t.onChange=function(e){t.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(s.a)({},e.target.name,e.target.value))}))},t.onFavouriteToggle=function(e){return function(n){var a=JSON.parse(localStorage.getItem("favourites"))||[],c={sub:e.subreddit,post:e.id};console.log(c),n.target.checked?a.push(c):a=a.filter((function(t){return t.post!==c.post})),localStorage.setItem("favourites",JSON.stringify(a)),t.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{favourites:a})})),console.log(localStorage)}},t.state={accessToken:null,posts:[],favourites:[]},t}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var t=this;localStorage.getItem("favourites")||localStorage.setItem("favourites",JSON.stringify([])),this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{favourites:JSON.parse(localStorage.getItem("favourites"))})}));S.a.post("https://www.reddit.com/api/v1/access_token","grant_type=https://oauth.reddit.com/grants/installed_client&device_id=KoT64k4SD4Gc727dTBekDFM5",{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},auth:{username:"aQ3puFCfy1uKwQ",password:""}}).then((function(e){var n=e.data.access_token;S.a.defaults.headers.common.Authorization="Bearer ".concat(n),t.setState({accessToken:n})})).catch((function(){t.setState({error:"Could not get access token for reddit API"})})).data}},{key:"render",value:function(){var t=this,e=this.state,n=e.accessToken,a=e.posts,c=e.favourites;return console.log("POSTS",a),console.log("favourites",c),n?Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(v,{}),Object(f.jsxs)("main",{className:"wrapper",children:[Object(f.jsxs)("section",{className:"content",id:"subreddit-input",children:[Object(f.jsx)(m,{type:"subtitle",children:"Enter a subreddit name"}),Object(f.jsx)(x,{type:"text",name:"subreddit",onChange:this.onChange,placeholder:"Subreddit name"}),Object(f.jsx)(O,{onClick:this.onViewClick,size:"normal",color:"primary",children:"View posts"}),Object(f.jsx)(O,{onClick:this.onViewFavouritesClick,size:"normal",color:"primary",children:"View favourites"})]}),Object(f.jsx)("section",{className:"content",id:"subreddit-posts",children:a.map((function(e){return Object(f.jsx)(g,{title:e.data.title,onFavourite:t.onFavouriteToggle(e.data),isFavourite:!!c.find((function(t){return t.post===e.data.id})),content:e.data.selftext||Object(f.jsx)("img",{src:e.data.url})||Object(f.jsx)("img",{src:e.data.thumbnail})},e.data.id)}))})]})]}):Object(f.jsx)("h1",{children:"Loading..."})}}]),n}(a.Component)),w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};n(47);o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(y,{})}),document.getElementById("root")),w(console.log)}},[[48,1,2]]]);
//# sourceMappingURL=main.f206dd4b.chunk.js.map